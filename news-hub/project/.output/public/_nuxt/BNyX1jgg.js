import{d as b,J as h,r as d,o as f,x as a,z as s,A as l,P as r,Q as y,R as v,S as k,y as n,q as w}from"./npYQabhD.js";const C={class:"min-h-screen bg-white"},j={class:"border-b-2 border-black bg-white"},P={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},A={class:"flex justify-between items-center h-16"},B={class:"flex items-center space-x-4"},E={class:"text-sm text-gray-600"},F={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},L={key:0,class:"flex justify-center items-center py-12"},N={key:1,class:"text-center py-12"},S={class:"text-red-600 mb-4"},T={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},$=["onClick"],M={class:"flex items-center space-x-4 mb-4"},R=["src","alt"],V={class:"text-xl font-bold text-black"},q={class:"text-sm text-gray-500 bg-gray-100 px-2 py-1 rounded"},z={class:"text-gray-600 mb-4"},J=b({__name:"dashboard",setup(D){const{user:u,logout:g}=h(),x=d([]),i=d(!0),c=d(""),m=async()=>{try{i.value=!0,c.value="";const t=await k.get("/media-platforms");if(t.status===200)x.value=t.data;else throw new Error("Failed to fetch platforms")}catch(t){c.value=t instanceof Error?t.message:"Failed to load platforms"}finally{i.value=!1}},_=t=>{w(`/news/${t.id}?name=${encodeURIComponent(t.name)}`)},p=()=>{g()};return f(()=>{m()}),(t,e)=>(n(),a("div",C,[s("header",j,[s("div",P,[s("div",A,[e[0]||(e[0]=s("div",{class:"flex items-center"},[s("h1",{class:"text-2xl font-bold text-black"},"News Hub")],-1)),s("div",B,[s("span",E,"Welcome, "+l(r(u)?.name),1),s("button",{onClick:p,class:"btn-secondary text-sm"}," Sign Out ")])])])]),s("main",F,[e[3]||(e[3]=s("div",{class:"mb-8"},[s("h2",{class:"text-3xl font-bold text-black mb-2"},"Media Platforms"),s("p",{class:"text-gray-600"},"Choose a news source to explore the latest stories")],-1)),r(i)?(n(),a("div",L,e[1]||(e[1]=[s("div",{class:"text-lg text-gray-600"},"Loading platforms...",-1)]))):r(c)?(n(),a("div",N,[s("div",S,l(r(c)),1),s("button",{onClick:m,class:"btn-primary"}," Try Again ")])):(n(),a("div",T,[(n(!0),a(y,null,v(r(x),o=>(n(),a("div",{key:o.id,onClick:H=>_(o),class:"card cursor-pointer transform hover:scale-105 transition-transform duration-200"},[s("div",M,[s("img",{src:o.logo,alt:o.name,class:"w-16 h-16 rounded-lg object-cover border-2 border-gray-200"},null,8,R),s("div",null,[s("h3",V,l(o.name),1),s("span",q,l(o.category),1)])]),s("p",z,l(o.description),1),e[2]||(e[2]=s("div",{class:"flex justify-end"},[s("span",{class:"text-sm font-medium text-black"}," View News â†’ ")],-1))],8,$))),128))]))])]))}});export{J as default};
